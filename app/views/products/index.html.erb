<div data-controller="cart">
  <% @products.each do |product| %>
    <div style="border:1px solid #ccc; margin:1em 0; padding:1em;">
      <h2><%= link_to product.name, product_path(product) %></h2>
      <p><%= product.description %></p>
      <p><strong><%= number_to_currency(product.price, unit: "â‚¬") %></strong></p>
      <%= image_tag product.image_url, alt: product.name, style: "max-width: 200px;" if product.image_url.present? %>

      <button 
        data-action="click->cart#add"
        data-id="<%= product.id %>" 
        data-name="<%= product.name %>" 
        data-price="<%= product.price %>">
        Ajouter au panier
      </button>
    </div>
  <% end %>

  <button data-action="click->cart#test" style="margin-top:2em;">
    Test Stimulus
  </button>
</div>
